execute as @e[type=armor_stand,name=pcr_pancrafter,tag=pcm2_pcr_lockbox_key] at @s unless block ~ ~ ~ minecraft:chest run kill @e[type=minecraft:item,nbt={Item:{id:"minecraft:white_dye",Count:1b,tag:{pcm2_key:1,CustomModelData:299,PCUUID:299,display:{Lore:['{"italic":false,"color":"gray","translate":"pcm2.items.lootbox.key.lore1"}','{"italic":false,"color":"gray","text":" "}','{"italic":false,"color":"gray","translate":"pcm2.items.lootbox.key.lore2"}','{"italic":false,"color":"gray","translate":"pcm2.items.lootbox.key.lore3"}'],Name:'{"italic":false,"color":"yellow","translate":"pcm2.items.lootbox.key.name"}'},PCM:2}}},limit=1,sort=nearest]
execute as @e[type=armor_stand,name=pcr_pancrafter] at @s if block ~ ~ ~ minecraft:chest{Items:[{Slot:1b,id:"minecraft:emerald_block"},{Slot:2b,id:"minecraft:emerald"},{Slot:3b,id:"minecraft:emerald"},{Slot:11b,id:"minecraft:emerald"},{Slot:12b,id:"minecraft:emerald"},]} unless block ~ ~ ~ minecraft:chest{Items:[{Slot:10b}]} unless block ~ ~ ~ minecraft:chest{Items:[{Slot:19b}]} unless block ~ ~ ~ minecraft:chest{Items:[{Slot:20b}]} unless block ~ ~ ~ minecraft:chest{Items:[{Slot:21b}]} run tag @s add pcm2_pcr_lockbox_key2
execute as @e[type=armor_stand,name=pcr_pancrafter] at @s if block ~ ~ ~ minecraft:chest{Items:[{Slot:10b,id:"minecraft:emerald_block"},{Slot:11b,id:"minecraft:emerald"},{Slot:12b,id:"minecraft:emerald"},{Slot:20b,id:"minecraft:emerald"},{Slot:21b,id:"minecraft:emerald"},]} unless block ~ ~ ~ minecraft:chest{Items:[{Slot:1b}]} unless block ~ ~ ~ minecraft:chest{Items:[{Slot:2b}]} unless block ~ ~ ~ minecraft:chest{Items:[{Slot:3b}]} unless block ~ ~ ~ minecraft:chest{Items:[{Slot:19b}]} run tag @s add pcm2_pcr_lockbox_key2
execute as @e[type=armor_stand,name=pcr_pancrafter,tag=pcm2_pcr_lockbox_key,tag=!pcm2_pcr_lockbox_key2] at @s run replaceitem block ~ ~ ~ container.15 minecraft:air
execute as @e[type=armor_stand,name=pcr_pancrafter,tag=pcm2_pcr_lockbox_key,tag=!pcm2_pcr_lockbox_key2] at @s run tag @s remove pcm2_pcr_lockbox_key
execute as @e[type=armor_stand,name=pcr_pancrafter,tag=pcm2_pcr_lockbox_key2] at @s run tag @s remove pcm2_pcr_lockbox_key2
execute as @e[type=armor_stand,name=pcr_pancrafter,tag=pcm2_pcr_lockbox_key] at @s unless block ~ ~ ~ minecraft:chest{Items:[{Slot:15b,id:"minecraft:white_dye",Count:1b,tag:{pcm2_key:1,CustomModelData:299,PCUUID:299,display:{Lore:['{"italic":false,"color":"gray","translate":"pcm2.items.lootbox.key.lore1"}','{"italic":false,"color":"gray","text":" "}','{"italic":false,"color":"gray","translate":"pcm2.items.lootbox.key.lore2"}','{"italic":false,"color":"gray","translate":"pcm2.items.lootbox.key.lore3"}'],Name:'{"italic":false,"color":"yellow","translate":"pcm2.items.lootbox.key.name"}'},PCM:2}}]} run function pcm_pancrafter:pancrafter/remove_item
execute as @e[type=armor_stand,name=pcr_pancrafter,tag=pcm2_pcr_lockbox_key] at @s unless block ~ ~ ~ minecraft:chest{Items:[{Slot:15b,id:"minecraft:white_dye",Count:1b,tag:{pcm2_key:1,CustomModelData:299,PCUUID:299,display:{Lore:['{"italic":false,"color":"gray","translate":"pcm2.items.lootbox.key.lore1"}','{"italic":false,"color":"gray","text":" "}','{"italic":false,"color":"gray","translate":"pcm2.items.lootbox.key.lore2"}','{"italic":false,"color":"gray","translate":"pcm2.items.lootbox.key.lore3"}'],Name:'{"italic":false,"color":"yellow","translate":"pcm2.items.lootbox.key.name"}'},PCM:2}}]} if block ~ ~ ~ minecraft:chest{Items:[{Slot:15b}]} run tag @s remove pcm2_pcr_lockbox_key
execute as @e[type=armor_stand,name=pcr_pancrafter,tag=pcm2_pcr_lockbox_key] at @s unless block ~ ~ ~ minecraft:chest{Items:[{Slot:15b}]} run tag @s remove pcm2_pcr_lockbox_key
execute as @e[type=armor_stand,name=pcr_pancrafter] at @s unless block ~ ~ ~ minecraft:chest{Items:[{Slot:15b}]} if block ~ ~ ~ minecraft:chest{Items:[{Slot:1b,id:"minecraft:emerald_block"},{Slot:2b,id:"minecraft:emerald"},{Slot:3b,id:"minecraft:emerald"},{Slot:11b,id:"minecraft:emerald"},{Slot:12b,id:"minecraft:emerald"},]} unless block ~ ~ ~ minecraft:chest{Items:[{Slot:10b}]} unless block ~ ~ ~ minecraft:chest{Items:[{Slot:19b}]} unless block ~ ~ ~ minecraft:chest{Items:[{Slot:20b}]} unless block ~ ~ ~ minecraft:chest{Items:[{Slot:21b}]} run tag @s add pcm2_pcr_lockbox_key
execute as @e[type=armor_stand,name=pcr_pancrafter] at @s unless block ~ ~ ~ minecraft:chest{Items:[{Slot:15b}]} if block ~ ~ ~ minecraft:chest{Items:[{Slot:10b,id:"minecraft:emerald_block"},{Slot:11b,id:"minecraft:emerald"},{Slot:12b,id:"minecraft:emerald"},{Slot:20b,id:"minecraft:emerald"},{Slot:21b,id:"minecraft:emerald"},]} unless block ~ ~ ~ minecraft:chest{Items:[{Slot:1b}]} unless block ~ ~ ~ minecraft:chest{Items:[{Slot:2b}]} unless block ~ ~ ~ minecraft:chest{Items:[{Slot:3b}]} unless block ~ ~ ~ minecraft:chest{Items:[{Slot:19b}]} run tag @s add pcm2_pcr_lockbox_key
execute as @e[type=armor_stand,name=pcr_pancrafter,tag=pcm2_pcr_lockbox_key] at @s run replaceitem block ~ ~ ~ container.15 white_dye{pcm2_key:1,CustomModelData:299,PCUUID:299,display:{Lore:['{"italic":false,"color":"gray","translate":"pcm2.items.lootbox.key.lore1"}','{"italic":false,"color":"gray","text":" "}','{"italic":false,"color":"gray","translate":"pcm2.items.lootbox.key.lore2"}','{"italic":false,"color":"gray","translate":"pcm2.items.lootbox.key.lore3"}'],Name:'{"italic":false,"color":"yellow","translate":"pcm2.items.lootbox.key.name"}'},PCM:2} 1
