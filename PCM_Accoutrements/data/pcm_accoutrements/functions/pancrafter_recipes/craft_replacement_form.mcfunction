execute as @e[type=armor_stand,name=pcr_pancrafter,tag=pcm2_pcr_replacement] at @s unless block ~ ~ ~ minecraft:chest run kill @e[type=minecraft:item,nbt={Item:{id:"minecraft:enchanted_book",Count:1b,tag:{CustomModelData:289,PCUUID:289,HideFlags:63,pcm2_generic_hat_giver:1,display:{Lore:['{"italic":false,"color":"gray","translate":"pcm2.items.systems.replacement_form.lore1"}','{"italic":false,"color":"gray","translate":"pcm2.items.systems.replacement_form.lore2"}'],Name:'{"italic":false,"color":"white","translate":"pcm2.items.systems.replacement_form.name"}'},PCM:2,pcm2_replacement_form:1}}},limit=1,sort=nearest]
execute as @e[type=armor_stand,name=pcr_pancrafter] at @s if block ~ ~ ~ minecraft:chest{Items:[{Slot:10b,id:"minecraft:leather_helmet",tag:{pcm2_hat:1}},{Slot:11b,id:"minecraft:leather_helmet",tag:{pcm2_hat:1}},{Slot:12b,id:"minecraft:leather_helmet",tag:{pcm2_hat:1}},]} unless block ~ ~ ~ minecraft:chest{Items:[{Slot:1b}]} unless block ~ ~ ~ minecraft:chest{Items:[{Slot:2b}]} unless block ~ ~ ~ minecraft:chest{Items:[{Slot:3b}]} unless block ~ ~ ~ minecraft:chest{Items:[{Slot:19b}]} unless block ~ ~ ~ minecraft:chest{Items:[{Slot:20b}]} unless block ~ ~ ~ minecraft:chest{Items:[{Slot:21b}]} run tag @s add pcm2_pcr2_replacement
execute as @e[type=armor_stand,name=pcr_pancrafter,tag=pcm2_pcr_replacement,tag=!pcm2_pcr2_replacement] at @s run replaceitem block ~ ~ ~ container.15 minecraft:air
execute as @e[type=armor_stand,name=pcr_pancrafter,tag=pcm2_pcr_replacement,tag=!pcm2_pcr2_replacement] at @s run tag @s remove pcm2_pcr_replacement
execute as @e[type=armor_stand,name=pcr_pancrafter,tag=pcm2_pcr2_replacement] at @s run tag @s remove pcm2_pcr2_replacement
execute as @e[type=armor_stand,name=pcr_pancrafter,tag=pcm2_pcr_replacement] at @s unless block ~ ~ ~ minecraft:chest{Items:[{Slot:15b,id:"minecraft:enchanted_book",Count:1b,tag:{CustomModelData:289,PCUUID:289,HideFlags:63,pcm2_generic_hat_giver:1,display:{Lore:['{"italic":false,"color":"gray","translate":"pcm2.items.systems.replacement_form.lore1"}','{"italic":false,"color":"gray","translate":"pcm2.items.systems.replacement_form.lore2"}'],Name:'{"italic":false,"color":"white","translate":"pcm2.items.systems.replacement_form.name"}'},PCM:2,pcm2_replacement_form:1}}]} run function pcm_pancrafter:pancrafter/remove_item
execute as @e[type=armor_stand,name=pcr_pancrafter,tag=pcm2_pcr_replacement] at @s unless block ~ ~ ~ minecraft:chest{Items:[{Slot:15b,id:"minecraft:enchanted_book",Count:1b,tag:{CustomModelData:289,PCUUID:289,HideFlags:63,pcm2_generic_hat_giver:1,display:{Lore:['{"italic":false,"color":"gray","translate":"pcm2.items.systems.replacement_form.lore1"}','{"italic":false,"color":"gray","translate":"pcm2.items.systems.replacement_form.lore2"}'],Name:'{"italic":false,"color":"white","translate":"pcm2.items.systems.replacement_form.name"}'},PCM:2,pcm2_replacement_form:1}}]} if block ~ ~ ~ minecraft:chest{Items:[{Slot:15b}]} run tag @s remove pcm2_pcr_replacement
execute as @e[type=armor_stand,name=pcr_pancrafter,tag=pcm2_pcr_replacement] at @s unless block ~ ~ ~ minecraft:chest{Items:[{Slot:15b}]} run tag @s remove pcm2_pcr_replacement
execute as @e[type=armor_stand,name=pcr_pancrafter] at @s unless block ~ ~ ~ minecraft:chest{Items:[{Slot:15b}]} if block ~ ~ ~ minecraft:chest{Items:[{Slot:10b,id:"minecraft:leather_helmet",tag:{pcm2_hat:1}},{Slot:11b,id:"minecraft:leather_helmet",tag:{pcm2_hat:1}},{Slot:12b,id:"minecraft:leather_helmet",tag:{pcm2_hat:1}},]} unless block ~ ~ ~ minecraft:chest{Items:[{Slot:1b}]} unless block ~ ~ ~ minecraft:chest{Items:[{Slot:2b}]} unless block ~ ~ ~ minecraft:chest{Items:[{Slot:3b}]} unless block ~ ~ ~ minecraft:chest{Items:[{Slot:19b}]} unless block ~ ~ ~ minecraft:chest{Items:[{Slot:20b}]} unless block ~ ~ ~ minecraft:chest{Items:[{Slot:21b}]} run tag @s add pcm2_pcr_replacement
execute as @e[type=armor_stand,name=pcr_pancrafter,tag=pcm2_pcr_replacement] at @s run replaceitem block ~ ~ ~ container.15 enchanted_book{CustomModelData:289,PCUUID:289,HideFlags:63,pcm2_generic_hat_giver:1,display:{Lore:['{"italic":false,"color":"gray","translate":"pcm2.items.systems.replacement_form.lore1"}','{"italic":false,"color":"gray","translate":"pcm2.items.systems.replacement_form.lore2"}'],Name:'{"italic":false,"color":"white","translate":"pcm2.items.systems.replacement_form.name"}'},PCM:2,pcm2_replacement_form:1} 1
